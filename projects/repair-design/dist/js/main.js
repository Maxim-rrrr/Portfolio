$(document).ready(function(){var e=$(".modal");$("[data-toggle=modal]").on("click",()=>{e.toggleClass("modal--visible")}),e.on("click",()=>{"modal__close"!==event.target.className&&"modal modal--visible"!==event.target.className||e.removeClass("modal--visible")}),window.addEventListener("keydown",function(n){27==n.keyCode&&(e.removeClass("modal--visible"),a.removeClass("modal--visible"))},!0);var a=$(".modal-thanks");a.on("click",()=>{"modal__close-thanks"!==event.target.className&&"modal-thanks modal--visible"!==event.target.className||a.removeClass("modal--visible")});new Swiper(".projects__swiper-container",{loop:!0,pagination:{el:".projects__swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".projects__swiper-button-next",prevEl:".projects__swiper-button-prev"}});var n=$(".projects__swiper-button-next"),o=$(".projects__swiper-button-prev"),t=$(".projects__swiper-pagination");n.css("left",o.width()+20+t.width()+20),t.css("left",o.width()+20);new Swiper(".steps__swiper-container",{loop:!0,pagination:{el:".plan__swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".steps__swiper-button-next",prevEl:".steps__swiper-button-prev"}});var i=$(".steps__swiper-button-next"),r=$(".steps__swiper-button-prev"),l=$(".steps__swiper-pagination");function s(e){e.target.playVideo()}i.css("left",r.width()+19+l.width()+19),l.css("left",r.width()+19),(new WOW).init(),$(".modal__form").validate({rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:18},userEmail:{required:!0,email:!0},policyCheckbox:{required:!0}},errorClass:"invalid",messages:{userName:{required:"Имя обязательно",minlength:"Длина имени 2-15 символов",maxlength:"Длина имени 2-15 символов"},userPhone:{required:"Телефон обязательно",minlength:"Введите телефон полностью"},userEmail:{required:"Обязательно укажите Email",email:"Введите в формате: name@domain.com"},policyCheckbox:{required:"Нужно поставить галочку"}},submitHandler:function(n){$.ajax({type:"POST",url:"send.php",data:$(n).serialize(),success:function(o){console.log("Ajax сработал, ответ с сервера",o),$(n)[0].reset(),e.removeClass("modal--visible"),a.toggleClass("modal--visible"),ym(61250854,"reachGoal","form")}})}}),$("#modal-policy-checkbox").on("click",()=>{$("#modalCheckLabel").toggleClass("check")}),$(".footer__form").validate({rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:18},userQuestion:{required:!0},policyCheckbox:{required:!0}},errorClass:"invalid",messages:{userName:{required:"Имя обязательно",minlength:"Длина имени 2-15 символов",maxlength:"Длина имени 2-15 символов"},userPhone:{required:"Телефон обязательно",minlength:"Введите телефон полностью"},userQuestion:{required:"Обязательно напишите вопрос"},policyCheckbox:{required:"Нужно поставить галочку"}},submitHandler:function(e){$.ajax({type:"POST",url:"send.php",data:$(e).serialize(),success:function(n){console.log("Ajax сработал, ответ с сервера",n),$(e)[0].reset(),a.toggleClass("modal--visible"),ym(61250854,"reachGoal","form")}})}}),$("#footer-policy-checkbox").on("click",()=>{$("#footerCheckLabel").toggleClass("check")}),$(".control__form").validate({rules:{userName:{required:!0,minlength:2,maxlength:15},userPhone:{required:!0,minlength:18},policyCheckbox:{required:!0}},errorClass:"invalid",messages:{userName:{required:"Имя обязательно",minlength:"Длина имени 2-15 символов",maxlength:"Длина имени 2-15 символов"},userPhone:{required:"Телефон обязательно",minlength:"Введите телефон полностью"},policyCheckbox:{required:"Нужно поставить галочку"}},submitHandler:function(e){$.ajax({type:"POST",url:"send.php",data:$(e).serialize(),success:function(n){a.toggleClass("modal--visible"),console.log("Ajax сработал, ответ с сервера",n),$(e)[0].reset(),ym(61250854,"reachGoal","form")}})}}),$("#control-policy-checkbox").on("click",()=>{$("#controlCheckLabel").toggleClass("check")}),$("[type=tel]").mask("+7 (000) 000-00-00"),$(".video__play").on("click",function(){new YT.Player("player",{height:"465",width:"100%",videoId:"8awdQRP816c",events:{onReady:s}})});var c=$(".ymap-container").children(".loader"),m=0;function d(){var e=new ymaps.Map("map-yandex",{center:[47.244729,39.723187],zoom:18,controls:["zoomControl","fullscreenControl"]});e.behaviors.disable("scrollZoom");var a=new ymaps.Placemark([47.244729,39.723187],{balloonContent:"Офис Repair Design Project"},{iconLayout:"default#imageWithContent",iconImageHref:"img/map-marker.png",iconImageSize:[32,32],iconImageOffset:[-25,-50]});e.geoObjects.add(a),function(e){return new ymaps.vow.Promise(function(a,n){var o=function(e){for(var a in e)if(e.hasOwnProperty(a)&&(e[a]instanceof ymaps.layer.tileContainer.CanvasContainer||e[a]instanceof ymaps.layer.tileContainer.DomContainer))return e[a];return null}(e),t=!0;o.tiles.each(function(e,a){e.isReady()||(t=!1)}),t?a():o.events.once("ready",function(){a()})})}(e.layers.get(0).get(0)).then(function(){c.removeClass("is-active")})}var u=function(){$(".ymap-container").mouseenter(function(){var e,a,n;0==m&&(m=1,c.addClass("is-active"),e="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1",a=function(){ymaps.load(d)},(n=document.createElement("script")).readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,a())}:n.onload=function(){a()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n))})};$(function(){u()}),jQuery(function(e){e('a[href*="#"]').on("click.smoothscroll",function(a){var n=this.hash,o=n.replace(/#/,""),t=e(this).attr("href").replace(/#.*/,"");if(!t||location.href.replace(/#.*/,"")==t){var i=""===o?e("body"):e(n+', a[id="'+o+'"]').first();i.length&&(a.preventDefault(),e("html, body").stop().animate({scrollTop:i.offset().top-0},400,"swing",function(){window.location.hash=n}))}})})});